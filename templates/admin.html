<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>لوحة الأدمن</title>
    <style>
        body { font-family: "Segoe UI", Tahoma, Arial; background: #f0f0f0; padding: 20px; }
        h2 { text-align: center; margin-bottom: 20px; }

        form { text-align: center; margin-bottom: 30px; }
        select { padding: 6px; margin: 0 5px; font-size: 16px; }
        button { padding: 6px 12px; font-size: 16px; cursor: pointer; }

        table { width: 100%; border-collapse: collapse; margin-bottom: 40px; }
        th, td { border: 1px solid #aaa; padding: 8px; text-align: center; }
        th { background: #1565c0; color: white; }

        .group-title { padding: 10px; font-weight: bold; color: white; margin-bottom: 5px; border-radius: 6px; }
        .group1 { background: #42a5f5; }
        .group2 { background: #66bb6a; }
        .group-container { margin-bottom: 50px; }
    </style>
</head>
<body>
    <h2>لوحة الأدمن - الطلاب</h2>

    <!-- فلتر القسم والفوج -->
    <form method="get" action="/admin">
        <select name="class">
            <option value="">اختر القسم</option>
            {% for c in classes %}
                <option value="{{ c }}" {% if c == selected_class %}selected{% endif %}>{{ c }}</option>
            {% endfor %}
        </select>

        <select name="group">
            <option value="">اختر الفوج</option>
            {% for g in groups %}
                <option value="{{ g }}" {% if g == selected_group %}selected{% endif %}>{{ g }}</option>
            {% endfor %}
        </select>

        <button type="submit">فلترة</button>
        <a href="/admin"><button type="button">إظهار الكل</button></a>
    </form>

    <!-- عرض الجداول -->
    {% for group_name, students in grouped_students.items() %}
        <div class="group-container">
            {% set color_class = "group1" if "الفوج1" in group_name else "group2" %}
            <div class="group-title {{ color_class }}">{{ group_name }}</div>
            <table>
                <tr>
                    <th>اللقب</th>
                    <th>الاسم الشخصي</th>
                    <th>رقم الهاتف</th>
                    <th>ملاحظة</th>
                </tr>
                {% for student in students %}
                <tr>
                    <td>{{ student['last_name'] }}</td>
                    <td>{{ student['first_name'] }}</td>
                    <td>{{ student['phone'] }}</td>
                    <td>{{ student['note'] }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
    {% endfor %}
</body>
</html>
