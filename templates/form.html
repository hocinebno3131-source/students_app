<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>نموذج تسجيل الطلبة</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
body { 
    font-family: 'Cairo', sans-serif; 
    background: #e3f2fd; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    height: 100vh; 
    margin: 0; 
    padding: 20px; 
}
.container { 
    max-width: 500px; 
    width: 100%;
    background: #1976d2; 
    padding: 30px; 
    border-radius: 12px; 
    box-shadow: 0 8px 20px rgba(0,0,0,0.2); 
    color: white;
}
h2 { 
    text-align: center; 
    margin-bottom: 25px; 
}
input, select { 
    width: 100%; 
    padding: 10px; 
    margin: 8px 0; 
    border-radius: 6px; 
    border: 1px solid #90caf9; 
    font-size: 16px; 
    background: #f9f9f9; 
    color: #000;
}
input:focus, select:focus {
    border-color: #42a5f5;
    outline: none;
}
.buttons { 
    display: flex; 
    gap: 15px; 
    margin-top: 15px; 
}
.buttons button { 
    flex: 1; 
    padding: 12px; 
    border: none; 
    border-radius: 6px; 
    font-size: 18px; 
    cursor: pointer; 
    font-weight: bold; 
    transition: 0.3s;
}
#submitBtn { 
    background: #4caf50; 
    color: white; 
}
#submitBtn:hover { 
    background: #388e3c; 
}
#cancelBtn { 
    background: #bdbdbd; 
    color: #212121; 
}
#cancelBtn:hover { 
    background: #616161; 
}

/* --- نافذة التحذير --- */
#duplicateModal {
    display: none;
    position: fixed;
    top: 0; left: 0; right:0; bottom:0;
    background: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
    z-index: 1000;
}
#duplicateModal .modal-content {
    background: #ffeb3b; /* لون الجيلو */
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    max-width: 400px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    font-size: 18px;
    font-weight: bold;
}
#duplicateModal .modal-content button {
    margin-top: 15px;
    padding: 10px 20px;
    font-size: 16px;
    font-weight: bold;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s;
}
#duplicateModal .modal-content button#closeModal {
    background: #f44336; /* أحمر لإغلاق */
    color: white;
}
#duplicateModal .modal-content button#closeModal:hover {
    background: #d32f2f;
}
</style>
</head>
<body>
<div class="container">
    <h2>نموذج تسجيل الطلبة</h2>
    <form method="POST" action="/" id="studentForm">
        <input type="text" name="last_name" placeholder="اللقب" required>
        <input type="text" name="first_name" placeholder="الاسم الشخصي" required>

        <!-- القسم -->
        <select name="class" required>
            <option value="">اختر القسم</option>
            <option value="أولى علوم1">أولى علوم1</option>
            <option value="أولى علوم2">أولى علوم2</option>
            <option value="أولى علوم3">أولى علوم3</option>
            <option value="أولى علوم4">أولى علوم4</option>
            <option value="أولى علوم5">أولى علوم5</option>
            <option value="أولى علوم6">أولى علوم6</option>
            <option value="أولى علوم7">أولى علوم7</option>
        </select>

        <!-- الفوج -->
        <select name="group" required>
            <option value="">اختر الفوج</option>
            <option value="الفوج1">الفوج1</option>
            <option value="الفوج2">الفوج2</option>
        </select>

        <input type="text" name="phone" placeholder="رقم الهاتف" required>
        <input type="text" name="note" placeholder="ملاحظة">

        <div class="buttons">
            <button type="submit" id="submitBtn">إرسال</button>
            <button type="button" id="cancelBtn" onclick="window.location.href='/'">إلغاء / خروج</button>
        </div>
    </form>
</div>

<!-- نافذة الطالب موجود -->
<div id="duplicateModal">
    <div class="modal-content">
        هذا الطالب موجود بالفعل! ❌
        <br>
        <button id="closeModal" onclick="closeDuplicateModal()">إغلاق</button>
    </div>
</div>

<script>
// هنا يجب أن يحتوي الباكند على مصفوفة الطلاب الحالية
const existingStudents = [
    // مثال: {last_name:"بن علي", first_name:"أحمد", class:"أولى علوم1"}
];

// تحقق من أن الحقول مكتوبة بالعربية
function isArabic(text) {
    return /^[\u0600-\u06FF\s]+$/.test(text);
}

document.getElementById("studentForm").addEventListener("submit", function(e){
    const lastName = this.last_name.value.trim();
    const firstName = this.first_name.value.trim();
    const classVal = this.class.value;

    // تحقق من العربية
    if(!isArabic(lastName) || !isArabic(firstName)) {
        e.preventDefault();
        alert("الرجاء كتابة المعلومات بالعربية فقط!");
        return;
    }

    // تحقق من الازدواجية
    const duplicate = existingStudents.some(s => 
        s.last_name === lastName && s.first_name === firstName && s.class === classVal
    );

    if(duplicate) {
        e.preventDefault();
        document.getElementById("duplicateModal").style.display = "flex";
    }
});

function closeDuplicateModal() {
    document.getElementById("duplicateModal").style.display = "none";
}
</script>

</body>
</html>
